(this["webpackJsonphahow-frontend-assessment"]=this["webpackJsonphahow-frontend-assessment"]||[]).push([[0],{69:function(e,n,t){e.exports=t(82)},78:function(e,n,t){},82:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),i=t(17),c=t.n(i),o=t(26),u=t(21),l=t(92),f=t(67),s=t(90),d=t(63),p=t(91),b=t(93),m=t(13),h=t(89),v=t(87),g=t(32),j=t(94),O=Object(u.c)({name:"heroes",initialState:null,reducers:{fetchHeroesFulfilled:function(e,n){return n.payload.heroes}}}),x=O.reducer,E=O.actions.fetchHeroesFulfilled,w=Object(u.b)("FETCH_HEROES"),P=function(e){return e.pipe(Object(f.a)(w),Object(v.a)((function(){return j.a.getJSON("https://hahow-recruit.herokuapp.com/heroes").pipe(Object(g.a)((function(e){return E({heroes:e})})))})))},y=t(51),C=t(16),k=Object(u.c)({name:"profile",initialState:null,reducers:{fetchProfileFulfilled:function(e,n){var t=n.payload,r=t.id,a=t.str,i=t.int,c=t.agi,o=t.luk;return{id:r,abilities:{str:a,int:i,agi:c,luk:o},totalPoints:a+i+c+o}},clearProfile:function(){return null},updateAbility:function(e,n){var t=n.payload,r=t.name,a=t.newCount;e.abilities[r]=a}}}),S=k.reducer,H=k.actions,I=H.fetchProfileFulfilled,F=H.clearProfile,L=H.updateAbility,A=Object(u.b)("FETCH_PROFILE"),N=function(e){return e.pipe(Object(f.a)(A),Object(v.a)((function(e){var n=e.payload.heroId;return function(e){return j.a.getJSON("https://hahow-recruit.herokuapp.com/heroes/".concat(e,"/profile"))}(n).pipe(Object(g.a)((function(e){return I(Object(y.a)({id:n},e))})))})))},T=Object(C.a)((function(e){var n=e.profile;return n?n.abilities:{}}),(function(e){var n=e.profile;return n?n.totalPoints:0}),(function(e,n){return n-Object.values(e).reduce((function(e,n){return e+n}),0)})),J=t(49),z=t(62),M=t(88),_=t(37),R={isLoading:!1,error:null},B=Object(u.c)({name:"updateProfileStatus",initialState:R,reducers:{updateProfileFulfilled:function(){return R},updateProfileFailed:function(e,n){var t=n.payload.error;e.isLoading=!1,e.error=t},updateProfile:function(e){e.isLoading=!0}}}),D=B.reducer,U=B.actions,Y=U.updateProfileFulfilled,q=U.updateProfileFailed,G=U.updateProfile,K=function(e,n){return e.pipe(Object(f.a)(G),function(e){return Object(M.a)(e.pipe(Object(g.a)((function(e){return e.profile}))))}(n),Object(v.a)((function(e){var n,t,r=Object(J.a)(e,2)[1];return(n=r.id,t=r.abilities,Object(j.a)({url:"https://hahow-recruit.herokuapp.com/heroes/".concat(n,"/profile"),method:"PATCH",headers:{"Content-Type":"application/json"},body:Object(y.a)({},t)})).pipe(Object(g.a)((function(){return Object(_.b)("Update successfully!"),Y()})),Object(h.a)((function(e){return _.b.error("The server is temporarily unavailable. Please try again later!"),Object(z.a)(q({error:e}))})))})))},Q=Object(m.c)({heroes:x,profile:S,updateProfileStatus:D}),V=Object(l.a)(),W=Object(u.a)({reducer:Q,middleware:[V]}),X=new s.a((function(e,n,t){return Object(b.a)(P,N,K)(e,n,t).pipe(Object(h.a)((function(e,n){return console.error(e),n})))}));V.run((function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return X.pipe(Object(d.a)((function(n){return n.apply(void 0,[e].concat(t)).pipe(Object(p.a)(e.pipe(Object(f.a)("EPIC_END"))))})))}));var Z=W,$=(t(78),t(54)),ee=t(6),ne=(t(79),t(4)),te=t(5);function re(){var e=Object(ne.a)(["\n  padding: 0.75em;\n  border-radius: 3px;\n  background-color: white;\n  box-shadow: 0 0px 2.2px rgba(0, 0, 0, 0.014), 0 0px 5.3px rgba(0, 0, 0, 0.02),\n    0 0px 10px rgba(0, 0, 0, 0.025), 0 0px 17.9px rgba(0, 0, 0, 0.03),\n    0 0px 33.4px rgba(0, 0, 0, 0.036), 0 0px 80px rgba(0, 0, 0, 0.05);\n\n  cursor: pointer;\n  user-select: none;\n\n  transition: box-shadow 0.25s, transform 0.25s;\n  transition-timing-function: ease-in-out;\n\n  &.active {\n    box-shadow: 0 2.5px 2.8px rgba(0, 0, 0, 0.011), 0 6.1px 6.7px rgba(0, 0, 0, 0.016),\n      0 11.4px 12.5px rgba(0, 0, 0, 0.02), 0 20.3px 22.3px rgba(0, 0, 0, 0.024),\n      0 38px 41.8px rgba(0, 0, 0, 0.029), 0 91px 100px rgba(0, 0, 0, 0.04);\n    transform: translateY(-8px);\n    outline: 2px dashed #3a678b;\n  }\n\n  .image {\n    width: 100%;\n  }\n  .title {\n    text-align: center;\n    margin: 0.5em 0 0.25em;\n  }\n"]);return re=function(){return e},e}var ae=te.a.div(re());function ie(e){var n=e.onClick,t=e.image,r=e.name,i=e.selected;return a.a.createElement(ae,{onClick:n,className:"".concat(i?"active":"")},a.a.createElement("img",{className:"image",src:t,alt:r}),a.a.createElement("h2",{className:"title"},r))}function ce(){var e=Object(ne.a)(["\n  margin: 3em 0;\n  text-align: center;\n  font-weight: 600;\n  color: #3a678b;\n"]);return ce=function(){return e},e}var oe=te.a.div(ce());function ue(){return a.a.createElement(oe,null,"(Loading...)")}var le="768px",fe="992px",se="1200px",de={sm:"(min-width: ".concat("576px",")"),md:"(min-width: ".concat(le,")"),lg:"(min-width: ".concat(fe,")"),xl:"(min-width: ".concat(se,")")};function pe(){var e=Object(ne.a)(["\n  flex-basis: 100%;\n  padding: 1em;\n  box-sizing: border-box;\n\n  @media screen and "," {\n    flex-basis: 50%;\n  }\n\n  @media screen and "," {\n    flex-basis: 25%;\n  }\n"]);return pe=function(){return e},e}function be(){var e=Object(ne.a)(["\n  display: flex;\n  flex-wrap: wrap;\n"]);return be=function(){return e},e}var me=te.a.div(be()),he=te.a.div(pe(),de.sm,de.md);function ve(e){var n=e.onHeroSelect,t=e.fetchHeroes,i=e.heroes,c=e.currentHeroId;if(Object(r.useEffect)((function(){t()}),[t]),!i)return a.a.createElement(ue,null);return a.a.createElement(me,null,i.map((function(e){var t=e.id,r=e.name,i=e.image;return a.a.createElement(he,{key:t},a.a.createElement(ie,{onClick:function(){n(t)},selected:t===c,image:i,name:r}))})))}ve.defaultProps={heroes:null,currentHeroId:null};var ge=Object(o.b)((function(e){return{heroes:e.heroes}}),(function(e){return{fetchHeroes:function(){return e(w())}}}))(ve);function je(){var e=Object(ne.a)(["\n  padding: 0.25em 0.75em;\n"]);return je=function(){return e},e}function Oe(){var e=Object(ne.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 130px;\n  margin: 0 1em;\n"]);return Oe=function(){return e},e}function xe(){var e=Object(ne.a)(["\n  text-transform: uppercase;\n"]);return xe=function(){return e},e}function Ee(){var e=Object(ne.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 0.75em;\n"]);return Ee=function(){return e},e}var we=te.a.div(Ee()),Pe=te.a.span(xe()),ye=te.a.div(Oe()),Ce=te.a.button(je());function ke(e){var n=e.name,t=e.count,r=e.noMorePoint,i=e.onChange,c=0===t;return a.a.createElement(we,null,a.a.createElement(Pe,{"data-testid":"name"},n),a.a.createElement(ye,null,a.a.createElement(Ce,{onClick:function(){return i(t+1)},type:"button",disabled:r,"data-testid":"increment-btn"},"+"),a.a.createElement("span",{"data-testid":"count"},t),a.a.createElement(Ce,{onClick:function(){return i(t-1)},type:"button",disabled:c,"data-testid":"decrement-btn"},"-")))}function Se(){var e=Object(ne.a)(["\n  margin-bottom: 0.5em;\n"]);return Se=function(){return e},e}function He(){var e=Object(ne.a)(["\n  min-width: 130px;\n  padding: 0.25em;\n  font-size: 1.25em;\n"]);return He=function(){return e},e}function Ie(){var e=Object(ne.a)(["\n  margin: 1em 0;\n"]);return Ie=function(){return e},e}var Fe=te.a.div(Ie()),Le=te.a.button(He()),Ae=te.a.div(Se());var Ne=Object(o.b)((function(e){return{availablePoints:T(e),isLoading:e.updateProfileStatus.isLoading}}),(function(e){return{onSave:function(){return e(G())}}}))((function(e){var n=e.onSave,t=e.isLoading,r=e.availablePoints,i=t||r>0;return a.a.createElement(Fe,null,a.a.createElement(Ae,{"data-testid":"status"},"\u5269\u9918\u9ede\u6578\uff1a ",r),a.a.createElement(Le,{"data-testid":"submit-btn",onClick:n,disabled:i},t?"Saving":"\u5132\u5b58"))}));function Te(){var e=Object(ne.a)(["\n  @media screen and "," {\n    display: flex;\n    justify-content: flex-end;\n    align-items: flex-end;\n  }\n"]);return Te=function(){return e},e}function Je(){var e=Object(ne.a)(["\n  flex-basis: 100%;\n  padding: 1em;\n  box-sizing: border-box;\n\n  @media screen and "," {\n    flex-basis: 50%;\n  }\n"]);return Je=function(){return e},e}function ze(){var e=Object(ne.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  padding: 2em;\n"]);return ze=function(){return e},e}var Me=te.a.div(ze()),_e=te.a.div(Je(),de.sm),Re=Object(te.a)(_e)(Te(),de.sm);function Be(e){var n=e.fetchProfile,t=e.clearProfile,i=e.onAbilityChange,c=e.heroId,o=e.profile,u=e.availablePoints;Object(r.useEffect)((function(){return n(c),function(){return t()}}),[n,t,c]);var l=0===u;return o?a.a.createElement(Me,null,a.a.createElement(_e,null,Object.entries(o.abilities).map((function(e){var n=Object(J.a)(e,2),t=n[0],r=n[1];return a.a.createElement(ke,{onChange:function(e){return i(t,e)},key:t,name:t,count:r,noMorePoint:l})}))),a.a.createElement(Re,null,a.a.createElement(Ne,null))):a.a.createElement(ue,null)}Be.defaultProps={profile:null};var De=Object(o.b)((function(e){return{profile:e.profile,availablePoints:T(e)}}),(function(e){return{fetchProfile:function(n){return e(A({heroId:n}))},clearProfile:function(){return e(F())},onAbilityChange:function(n,t){return e(L({name:n,newCount:t}))}}}))(Be);function Ue(){var e=Object(ne.a)(["\n  max-width: 960px;\n  padding: 1em;\n  margin: auto;\n"]);return Ue=function(){return e},e}var Ye=te.a.div(Ue()),qe=function(){var e=Object(ee.h)().path,n=Object(ee.h)("".concat(e,"/:heroId")),t=n&&n.params.heroId,r=Object(ee.g)();return a.a.createElement(Ye,null,a.a.createElement(ge,{onHeroSelect:function(n){n===t?r.push("".concat(e)):r.push("".concat(e,"/").concat(n))},currentHeroId:t}),n&&a.a.createElement(De,{heroId:t}))};var Ge=function(){return a.a.createElement("div",{className:"App"},a.a.createElement($.a,null,a.a.createElement(ee.d,null,a.a.createElement(ee.b,{path:"/heroes"},a.a.createElement(qe,null)),a.a.createElement(ee.b,null,a.a.createElement(ee.a,{to:"/heroes"})))),a.a.createElement(_.a,{autoClose:3e3}))};c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(o.a,{store:Z},a.a.createElement(Ge,null))),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.ac4b5cd2.chunk.js.map